# Email Scripts

–¢–æ–∑–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å—ä–¥—ä—Ä–∂–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤–µ –∑–∞ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –∏–º–µ–π–ª–∏ –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏—Ü–∏.

## –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ Welcome Emails

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è:

1. –£–±–µ–¥–µ—Ç–µ —Å–µ, —á–µ –∏–º–∞—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω **Resend API key** –≤ `.env.local`:
   ```
   RESEND_API_KEY=re_xxxxx
   ```

2. –£–±–µ–¥–µ—Ç–µ —Å–µ, —á–µ **Supabase credentials** —Å–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏ –≤ `.env.local`:
   ```
   NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
   SUPABASE_SERVICE_ROLE_KEY=xxxxx
   ```

3. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ dependencies (–∞–∫–æ –Ω–µ —Å—Ç–µ):
   ```bash
   npm install
   ```

### –°—Ç—ä–ø–∫–∏ –∑–∞ –∏–∑–ø—Ä–∞—â–∞–Ω–µ:

1. **–û—Ç–≤–æ—Ä–µ—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª** –≤ root –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

2. **–ü—É—Å–Ω–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç–∞**:
   ```bash
   npm run send-emails
   ```

   –ò–ª–∏ –¥–∏—Ä–µ–∫—Ç–Ω–æ:
   ```bash
   npx tsx scripts/send-welcome-emails.ts
   ```

3. **–°–∫—Ä–∏–ø—Ç—ä—Ç —â–µ**:
   - –ò–∑–≤–∞–¥–∏ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏ –æ—Ç –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏
   - –ü–æ–∫–∞–∂–µ –∫–æ–ª–∫–æ –∏–º–µ–π–ª–∞ —â–µ –∏–∑–ø—Ä–∞—Ç–∏
   - –î–∞–¥–µ –≤–∏ 5 —Å–µ–∫—É–Ω–¥–∏ –¥–∞ –æ—Ç–∫–∞–∂–µ—Ç–µ (Ctrl+C –∑–∞ –æ—Ç–∫–∞–∑)
   - –ò–∑–ø—Ä–∞—Ç–∏ –∏–º–µ–π–ª–∏ –µ–¥–∏–Ω –ø–æ –µ–¥–∏–Ω —Å 1 —Å–µ–∫—É–Ω–¥–∞ –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Ç—è—Ö
   - –ü–æ–∫–∞–∂–µ –ø—Ä–æ–≥—Ä–µ—Å –∏ —Å—Ç–∞—Ç—É—Å –∑–∞ –≤—Å–µ–∫–∏ –∏–º–µ–π–ª
   - –ü–æ–∫–∞–∂–µ —Ñ–∏–Ω–∞–ª–Ω–æ —Ä–µ–∑—é–º–µ (—É—Å–ø–µ—à–Ω–∏/–Ω–µ—É—Å–ø–µ—à–Ω–∏)

### –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏:

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –¢–æ–∑–∏ —Å–∫—Ä–∏–ø—Ç —â–µ –∏–∑–ø—Ä–∞—Ç–∏ –∏–º–µ–π–ª–∏ –Ω–∞ –í–°–ò–ß–ö–ò —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –≤ –±–∞–∑–∞—Ç–∞!

- –°–∫—Ä–∏–ø—Ç—ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–±–∞–≤—è 1 —Å–µ–∫—É–Ω–¥–∞ –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∏–º–µ–π–ª–∏—Ç–µ –∑–∞ –¥–∞ —Å–ø–∞–∑–∏ rate limits –Ω–∞ Resend
- –ê–∫–æ –Ω—è–∫–æ–π –∏–º–µ–π–ª —Ñ–µ–π–ª–Ω–µ, —Å–∫—Ä–∏–ø—Ç—ä—Ç —â–µ –ø—Ä–æ–¥—ä–ª–∂–∏ —Å—ä—Å —Å–ª–µ–¥–≤–∞—â–∏—è
- –í—Å–∏—á–∫–∏ –≥—Ä–µ—à–∫–∏ —Å–µ –ª–æ–≥–≤–∞—Ç –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞
- –ú–æ–∂–µ –¥–∞ —Å–ø—Ä–µ—Ç–µ –ø—Ä–æ—Ü–µ—Å–∞ –ø–æ –≤—Å—è–∫–æ –≤—Ä–µ–º–µ —Å Ctrl+C

### –ü—Ä–∏–º–µ—Ä –∏–∑—Ö–æ–¥:

```
üöÄ Starting email sending process...

üìä Fetching all giveaway entries from database...
‚úÖ Found 25 entries in database.

‚ö†Ô∏è  IMPORTANT: This will send emails to all registered users!
   Total emails to send: 25
   Press Ctrl+C to cancel, or wait 5 seconds to continue...

[1/25] Sending email to –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ (ivan@example.com)...
  ‚úÖ Email sent successfully!
[2/25] Sending email to –ú–∞—Ä–∏—è –ì–µ–æ—Ä–≥–∏–µ–≤–∞ (maria@example.com)...
  ‚úÖ Email sent successfully!
...

==================================================
üìä EMAIL SENDING SUMMARY
==================================================
Total entries: 25
‚úÖ Successfully sent: 24
‚ùå Failed: 1
==================================================

‚úÖ Script completed successfully!
```

### Troubleshooting:

- **"Email service not configured"**: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ `RESEND_API_KEY` –µ –∑–∞–¥–∞–¥–µ–Ω –≤ `.env.local`
- **"Missing NEXT_PUBLIC_SUPABASE_URL"**: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ Supabase credentials
- **"No entries found"**: –ù—è–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –≤ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏
- **Rate limit errors**: –£–≤–µ–ª–∏—á–µ—Ç–µ `DELAY_BETWEEN_EMAILS` –≤ —Å–∫—Ä–∏–ø—Ç–∞ (default 1000ms)

### Modification:

–ê–∫–æ –∏—Å–∫–∞—Ç–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ Facebook URL –≤ –∏–º–µ–π–ª–∏—Ç–µ:
1. –û—Ç–≤–æ—Ä–µ—Ç–µ `lib/email.ts`
2. –ù–∞–º–µ—Ä–µ—Ç–µ line 35: `const facebookUrl = '...'`
3. –°–º–µ–Ω–µ—Ç–µ —Å –¥–∏—Ä–µ–∫—Ç–Ω–∏—è –ª–∏–Ω–∫ –∫—ä–º –ø–æ—Å—Ç–∞ –∑–∞ —Ä–∞–∑–¥–∞–≤–∞–Ω–µ—Ç–æ
